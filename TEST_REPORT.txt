================================================================================
SPMVV EXAM RESULTS - RUN.SH TEST REPORT
================================================================================
Test Date: 2026-02-08
Test Location: VM 10.127.248.83
Script: /root/spmvv-exam-results/run.sh

================================================================================
TEST 1: INITIAL RUN
================================================================================
Command: /root/spmvv-exam-results/run.sh
Result: ✓ PASSED

Details:
- Services stopped successfully
- Database backed up: spmvv_results_20260208_234559.sql (93K)
- Backend started on port 8000
- Frontend started on port 2026
- Both services responding correctly

Verification:
- Backend API: http://10.127.248.83:8000/api/results/ → 401 (auth required) ✓
- Frontend: http://10.127.248.83:2026/ → SPMVV Exam Results page ✓
- Processes running:
  * python3 manage.py runserver 0.0.0.0:8000 ✓
  * node vite --host 0.0.0.0 --port 2026 ✓

================================================================================
TEST 2: STOP SERVICES
================================================================================
Command: pkill -f 'manage.py runserver' && pkill -f 'vite'
Result: ✓ PASSED

Details:
- All processes terminated successfully
- No running processes found after stop

================================================================================
TEST 3: RESTART SERVICES
================================================================================
Command: /root/spmvv-exam-results/run.sh
Result: ✓ PASSED

Details:
- Previous services stopped (none running)
- New database backup created: spmvv_results_20260208_235006.sql (93K)
- Backend restarted successfully
- Frontend restarted successfully
- Both services responding correctly

Verification:
- Backend API: ✓ Responding
- Frontend: ✓ Responding
- Logs:
  * Backend: /root/spmvv-exam-results/backend/logs/app.log (active)
  * Frontend: /tmp/vite.log (active)

================================================================================
TEST 4: DATABASE BACKUP VERIFICATION
================================================================================
Backup Directory: /root/spmvv-exam-results/backups/

Backups Created:
1. spmvv_results_20260208_234147.sql - 93K
2. spmvv_results_20260208_234237.sql - 93K
3. spmvv_results_20260208_234559.sql - 93K
4. spmvv_results_20260208_235006.sql - 93K

Database State:
- Total Results: 5
- Backup Format: Valid MariaDB dump
- Backup Size: Consistent (~93K each)

Result: ✓ PASSED

================================================================================
TEST 5: END-TO-END WORKFLOW
================================================================================
Workflow Tested:
1. Stop existing services ✓
2. Backup database ✓
3. Start backend ✓
4. Start frontend ✓
5. Verify services running ✓
6. Stop services ✓
7. Restart services ✓
8. Verify backups created ✓

Result: ✓ ALL TESTS PASSED

================================================================================
SUMMARY
================================================================================
✓ Script works correctly
✓ Services start/stop properly
✓ Database backups created automatically
✓ Logs are accessible
✓ No errors in execution
✓ Services are accessible via HTTP

RECOMMENDATION: Script is ready for production use.

================================================================================
USAGE INSTRUCTIONS
================================================================================

To run the application:
    /root/spmvv-exam-results/run.sh

To stop the application:
    pkill -f 'manage.py runserver' && pkill -f 'vite'

To restore a backup:
    mysql -u spmvv_user -pSpmvvDb@2026 spmvv_results < /root/spmvv-exam-results/backups/[backup_file]

To view logs:
    tail -f /root/spmvv-exam-results/backend/logs/app.log
    tail -f /tmp/vite.log

================================================================================
